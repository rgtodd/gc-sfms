<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<head>
<head>
<title>Explore</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
	<div layout:fragment="content">
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
				<li class="breadcrumb-item active" aria-current="page">Explore</li>
			</ol>
		</nav>
		<div class="row">
			<div id="divSpaceViewer" class="col-sm" style="height: 600px;">
				<canvas id="canvasSpaceViewer" style="width: 100%; height: 100%;"></canvas>
			</div>
			<div class="col-sm">
				<p>
					Sector: <span id="ctrlSector"></span>
				</p>
				<p>
					Object: <span id="ctrlObject"></span>
				</p>
				<p>
					Hover: <span id="ctrlHover"></span>
				</p>
				<p id="ctrlDebug"></p>
				<p>REST</p>
				<div id="ctrlRestLog" style="height: 400px; overflow: scroll;"></div>
			</div>
		</div>
	</div>
	<div layout:fragment="scripts">
		<script type="text/javascript" src="scripts/jquery-3.3.1.min.js"></script>
		<script type="text/javascript" src="scripts/three.js"></script>
		<script type="text/javascript"
			src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
		<script type="text/javascript" src="scripts/TrackballControls.js"></script>
		<script type="text/javascript" src="scripts/Detector.js"></script>
		<script type="text/javascript" src="scripts/stats.min.js"></script>
		<script type="text/javascript" src="scripts/SpaceViewer.js"></script>
		<script type="text/javascript" src="scripts/SpaceViewerMockHandler.js"></script>
		<script type="text/javascript" src="scripts/SpaceViewerRestHandler.js"></script>
		<script type="text/javascript" src="scripts/SpaceViewerRestLogger.js"></script>
		<script type="text/javascript">
			$(document)
					.ready(
							function() {
								SpaceViewerRestLogger
										.RegisterOnRestStartHandler(function(
												url) {
											$("#ctrlRestLog").append(
													"Start: " + url + "<br>");
										});

								SpaceViewerRestLogger
										.RegisterOnRestCompleteHandler(function(
												url) {
											$("#ctrlRestLog")
													.append(
															"Complete: " + url
																	+ "<br>");
										});

								SpaceViewer
										.RegisterGetSectorsHandler(SpaceViewerRestHandler.GetSectorsAsync);
								SpaceViewer
										.RegisterGetSectorByLocationHandler(SpaceViewerRestHandler.GetSectorByLocationAsync);
								SpaceViewer
										.RegisterGetSectorByKeyHandler(SpaceViewerRestHandler.GetSectorByKeyAsync);
								SpaceViewer
										.RegisterGetMapItemsBySectorHandler(SpaceViewerRestHandler.GetMapItemsBySectorAsync);
								SpaceViewer
										.RegisterGetMapItemsByRankHandler(SpaceViewerRestHandler.GetMapItemsByRankAsync);

								SpaceViewer
										.RegisterOnSectorClickHandler(function(
												sectorKey) {
											$('#ctrlSector').html(sectorKey);
										});

								SpaceViewer
										.RegisterOnMapItemClickHandler(function(
												mapItemType, mapItemKey) {
											$('#ctrlObject').html(
													mapItemType + ' '
															+ mapItemKey);
										});

								SpaceViewer
										.RegisterOnMapItemHoverHandler(function(
												mapItemType, mapItemKey) {
											$('#ctrlHover').html(
													mapItemType + ' '
															+ mapItemKey);
										});

								SpaceViewer.Initialize("#divSpaceViewer");
							});
		</script>
	</div>
</body>
</html>